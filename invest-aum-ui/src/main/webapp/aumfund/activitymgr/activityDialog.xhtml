<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="MgSetMasterCreateDlg" widgetVar="MgSetMasterCreateDialog" modal="true" resizable="false"  header="管理費主活動案新增設定" width="60%">
            <h:form id="MgSetMasterCreateForm">
                <p:messages id="dlgmsg" autoUpdate="true"/>
                <p:panelGrid rendered="#{mgSetMasterController.selected != null}" style="width: 100%">
                    
                    <p:row>
                        <p:column styleClass="ui-widget-header">
                            <p:outputLabel value="活動案收費對象" for="mgActMChargeObj" />
                        </p:column>
                        <p:column>
                            <p:selectOneRadio id="mgActMChargeObj" value="#{mgSetMasterController.selected.mgActMChargeObj}" 
                                              required="true" requiredMessage="請選擇活動案收費對象" disabled="#{mgSetMasterController.showReadonly()}">                                           
                                <f:selectItem itemLabel="向客戶收費" itemValue="C" /> 
                                <f:selectItem itemLabel="支付合作對象" itemValue="P" />      
                                <p:ajax event="change" update=":MgSetMasterCreateForm:mgActMCode"/>
                            </p:selectOneRadio> 
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column styleClass="ui-widget-header">
                            <p:outputLabel value="活動類型代碼" for="mgActMCode" />
                        </p:column>
                        <p:column>
                            <p:outputLabel id="mgActMCode" value="#{mgSetMasterController.selected.mgActMChargeObj}#{mgSetMasterController.showMgSetMasterCode()}"  />
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column styleClass="ui-widget-header">
                            <p:outputLabel value="活動名稱" for="mgActMName" />
                        </p:column>
                        <p:column>
                            <p:inputText size="50" id="mgActMName" value="#{mgSetMasterController.selected.mgActMName}" 
                                         title="#{bundle.CreateMgSetMasterTitle_mgActMName}" required="true" requiredMessage="請輸入活動名稱" 
                                         disabled="#{mgSetMasterController.showReadonly()}">
                                <f:validateLength maximum="25" />
                                <p:ajax update="dlgmsg" event="blur" />
                            </p:inputText>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column styleClass="ui-widget-header">
                            <p:outputLabel value="活動計算基礎" for="mgActMType" />
                        </p:column>
                        <p:column>
                            <p:selectOneRadio id="mgActMType" value="#{mgSetMasterController.selected.mgActMType}"
                                              required="true" requiredMessage="請選擇活動計算基礎" disabled="#{mgSetMasterController.showReadonly()}">                                  
                                <f:selectItem itemLabel="AUM(參考現值)" itemValue="1" /> 
                                <f:selectItem itemLabel="成本(信託本金)" itemValue="2" /> 
                            </p:selectOneRadio> 
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column styleClass="ui-widget-header">
                            <p:outputLabel value="活動計算規則" for="mgActMRateSet" />
                        </p:column>
                        <p:column>
                            <p:selectOneRadio id="mgActMRateSet" value="#{mgSetMasterController.selected.mgActMRateSet}" 
                                              required="true" requiredMessage="請選擇活動計算規則" disabled="#{mgSetMasterController.showReadonly()}">                                            
                                <f:selectItem itemLabel="LOW(取最小值)" itemValue="1" /> 
                                <f:selectItem itemLabel="HIGH(取最大值)" itemValue="2" /> 
                                <f:selectItem itemLabel="依子活動代碼" itemValue="3" /> 
                            </p:selectOneRadio> 
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column styleClass="ui-widget-header">
                            <p:outputLabel value="備註" for="mgActMRemark" />
                        </p:column>
                        <p:column>
                            <p:inputTextarea rows="10" cols="60" id="mgActMRemark" value="#{mgSetMasterController.selected.mgActMRemark}" 
                                             title="#{bundle.CreateMgSetMasterTitle_mgActMRemark}" disabled="#{mgSetMasterController.showReadonly()}" />
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <center>
                    <p:commandButton icon="ui-icon-cancel" actionListener="#{mgSetMasterController.reset}" value="取消" 
                                     onclick="PF('MgSetMasterCreateDialog').hide();" process="@this" />
                    <p:commandButton icon="ui-icon-plus" actionListener="#{mgSetMasterController.create()}" value="送出覆核" 
                                     update=":MgSetMasterListForm :MgSetMasterListForm:datalist :MgSetMasterCreateForm :MgSetMasterListForm:msgs"    
                                     onclick="PF('MgSetMasterCreateDialog').hide();"
                                     rendered="#{mgSetMasterController.showSend()}"/>
                    <p:commandButton icon="ui-icon-confirm" actionListener="#{mgSetMasterController.confirm('CONFIRM')}" value="同意覆核" 
                                     update=":MgSetMasterListForm:datalist,:growl" oncomplete="handleSubmit(args,'MgSetMasterCreateDialog');"
                                      rendered="#{mgSetMasterController.showConfirm()}"/>
                    <p:commandButton icon="ui-icon-reject" actionListener="#{mgSetMasterController.confirm('REJECT')}" value="退回" 
                                     update=":MgSetMasterListForm:datalist,:growl" oncomplete="handleSubmit(args,'MgSetMasterCreateDialog');"
                                     rendered="#{mgSetMasterController.showRejectBtn()}"/>
                    <p:commandButton icon="ui-icon-minus" actionListener="#{mgSetMasterController.update('DELETE')}" value="刪除" 
                                     update=":MgSetMasterListForm:datalist,:growl" oncomplete="handleSubmit(args,'MgSetMasterCreateDialog');"
                                     rendered="#{mgSetMasterController.showDelete()}"/>

                </center>

            </h:form>
        </p:dialog>

        



    </ui:composition>
</html>
